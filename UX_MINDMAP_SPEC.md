# AI協働型マインドマップ UI/UX 仕様（MVP）

## ゴールと対象
- 目的: 最小の手数で素早く発散→整理→保存まで完了できるエディタ
- 対象: 個人の創作/企画、少人数のブレスト
- 成功指標: 
  - 3分以内にサンプルマップ作成→保存できる
  - 主要操作はマウス/キーボードの2手以内で到達

## 競合サマリ（強み/弱みの抜粋）
- XMind: テンプレ/テーマ豊富・操作直感的。学習コストは低いがWeb版の軽快さは限定的
- MindMeister: コラボが強い・UIはシンプル。無料枠や機能制限での導線が多い
- Coggle: 極めて軽量・シンプル。高度編集/レイアウト自由度は抑えめ
- FigJam（マインドマップ系ウィジェット）: マルチツールの一部として便利、専用機能の深さは劣る
- XMind/Meisterの共通強み: 快速なノード追加、迷わないデフォルト配置、十分なショートカット

## 差別化ポリシー
- 「思考の滞り」を減らす: 入力→配置→分岐が1〜2操作で連続して行える
- エディタ一貫性: 右クリック/Enter/Tab/Backspace/矢印で想定どおりに動く
- ミニUI: 画面を覆わないコンテキストツールバー/ツールチップで即時編集
- 後で効くAI: 入力中/選択中ノード文脈から非侵襲で提案、ワンクリックで子ノード化

## 画面レイアウト（MVP）
- 上部バー: 新規/保存/読み込み、取り消し/やり直し、検索、レイアウト、AIパネル開閉
- 左ツール: 選択/パン、長押しでノード追加、枠選択
- 中央キャンバス: React Flow（パン/ズーム/選択/ドラッグ/接続）
- 右サイド: プロパティ（ラベル、色、タグ、ノード種別）＋AI提案（将来拡張）

## 基本操作
- マウス:
  - ドラッグ: ノード移動 / 空白ドラッグでパン
  - ダブルクリック: 新規ノード作成
  - エッジハンドルをドラッグ: 接続作成
  - 右クリック: コンテキストメニュー（追加/削除/接続/整列）
- キーボード（優先度高）:
  - Enter: 同階層ノードを後続に追加
  - Tab: 子ノード追加
  - Shift+Tab: 親に戻る/同階層へ
  - Backspace/Delete: ノード/エッジ削除
  - ArrowKeys: フォーカス移動（最近傍ノード）
  - Ctrl/Cmd+Z / Shift+Z: Undo/Redo
  - Ctrl/Cmd+F: ノード検索/ジャンプ

## コンテキストメニュー（ノード上）
- 子ノード追加 / 同階層追加 / 接続開始
- スタイル（色/アイコン/ハイライト）
- 折りたたみ / 展開
- ノード複製 / 削除

## 自動レイアウト
- 初期: 手動配置 + 1クリック整列（Tree/Dagre/ELK）
- オプション: 子のみ整列 / 全体整列 / 折りたたみ保持

## 管理（保存/読み込み）
- MVP: ローカルJSON保存/読み込み + PNGエクスポート
- 将来: バックエンド保存、バージョン管理、共同編集

## アクセシビリティ/国際化
- キーボードフル操作可能、フォーカスリング明確化
- 色依存回避（形/ラベル併用）
- i18n準備（en/ja）

## AI提案（将来含む設計）
- 選択ノードの文脈から「関連語/分解/対案」を箇条書きで提示
- クリックで子として挿入（元テキスト保持・取り消し可能）
- レート制限/ストリーミングは後日

## 非機能
- 60fps目標のドラッグ/ズーム、数百ノードでも操作がもたつかない
- オートセーブ（ローカル）

## MVPスコープ（チェックリスト）
- [ ] キャンバス基本操作（パン/ズーム/選択/複数選択）
- [ ] ノード/エッジの追加・移動・接続・削除
- [ ] コンテキストメニューと主要ショートカット
- [ ] 自動レイアウト（Tree/Dagre のどちらか一つ）
- [ ] JSON保存/読み込み、PNGエクスポート
- [ ] 検索・ジャンプ
- [ ] Undo/Redo

## 実装メモ
- React Flow + Zustand（ローカル状態） + TanStack Query（将来のAPI連携）
- レイアウト: `elkjs` もしくは `d3-hierarchy`（MVPは片方）
- コンテキストメニュー: Radix UI + Tailwind で小型ポップアップ
- 検索/コマンドパレット: `Ctrl/Cmd+K` でクイックアクション
